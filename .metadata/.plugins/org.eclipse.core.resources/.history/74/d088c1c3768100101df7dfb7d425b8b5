<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="sample.service.impl.LoginMapper">
	<select id="selectUserCnt" parameterType="java.util.Map" resultType="int">
	/*sample.service.impl.LoginMapper.selectUserCnt*/
	SELECT COUNT(*) as CNT
	  FROM USERS
	 WHERE 1=1
	   <if test="id != null and id != 'NULL'">
	   AND user_id = #{id}
	   </if>
	   <if test="id != null and id != 'NULL'">
	   AND pass = #{pw}
	   </if>
	</select>
	
	<select id="selectUser" parameterType="java.util.Map" resultType="java.util.Map">
	/*sample.service.impl.LoginMapper.selectUser*/
	SELECT USER_ID
	     , PASS
	     , NAME
	     , MAIL AS EMAIL
	     , ADDRESS
	     , SALT
	  FROM USERS
	 WHERE 1=1
	   AND USER_ID = #{id}
	   AND PASS = #{pw}
	</select>
	
<!-- 	</select> -->
	
<!-- 	<select id="selectUser" parameterType="java.util.Map" resultType="java.util.Map"> -->
<!-- 	/*sample.service.impl.LoginMapper.selectUser*/ -->
<!-- 	SELECT id -->
<!--          , pw -->
<!--          , name -->
<!--          , phone -->
<!--          , email -->
<!--          , code_dt -->
<!--          , code_dt_sub -->
<!--          , code_jw -->
<!--          , address -->
<!--          , gender -->
<!--          , hire_dt -->
<!-- 	  FROM tb_user -->
<!-- 	 WHERE 1=1 -->
<!-- 	   AND id = #{id} -->
<!-- 	   AND pw = #{pw} -->
<!-- 	</select> -->
	
	<insert id="insertUser" parameterType="java.util.Map">
	/*sample.service.impl.LoginMapper.insertUser*/
	INSERT INTO tb_user
	( id
    , pw
    , name
    , phone
    , email
    , code_dt
    , code_dt_sub
    , code_jw
    , address
    , gender
    , hire_dt
	)
	VALUES 
	( #{id}
	, #{pw}
	, #{name}
	, #{phone}
	, #{email}
	, #{code_dt}
	, #{code_dt_sub}
	, #{code_jw}
	, #{address}
	, #{gender}
	, STR_TO_DATE(#{hire_dt}, '%Y%m%d')
	)
	</insert>
	
	<select id="selectUsers" parameterType="java.util.Map" resultType="java.util.Map">
	/*sample.service.impl.LoginMapper."selectUsers"*/
	SELECT id
         , pw
         , name
         , phone
         , email
         , code_dt
         , code_dt_sub
         , code_jw
         , address
         , gender
         , hire_dt
	  FROM tb_user
	 WHERE 1=1
	   <if test="nm != null and nm != 'NULL'">
	   AND name like CONCAT('%',#{nm},'%')
	   </if>
	   <if test="dt != null and dt != 'NULL'">
	   AND code_dt = #{dt}
	   </if>
	   <if test="dt_sub != null and dt_sub != 'NULL'">
	   AND code_dt = #{dt_sub}
	   </if>
	   <if test="jw != null and jw != 'NULL'">
	   AND code_JW = #{jw}
	   </if>
	</select>
	
	<delete id="deleteCodeMst" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.deleteCodeMst*/
	DELETE FROM CMMN_CD_MST
	 WHERE CODE = #{CODE}
	</delete>
	
	<select id="checkCodeMst" parameterType="java.util.Map" resultType="Integer">
	/*sample.service.impl.CodeMapper.checkCodeMst*/
	SELECT COUNT(1)
	  FROM CMMN_CD_MST
	 WHERE CODE = #{CODE}
	</select>
	
	<insert id="insertCodeMst" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.insertCodeMst*/
	INSERT INTO CMMN_CD_MST
	( CODE
	, CODE_NM
	)
	VALUES 
	( #{CODE}
	, #{CODE_NM}
	)
	</insert>
	
	<update id="updateCodeMst" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.updateCodeMst*/
	UPDATE CMMN_CD_MST
	   SET CODE_NM = #{CODE_NM}
	 WHERE CODE = #{CODE}
	</update>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<select id="selectCodeDtl" parameterType="java.util.Map" resultType="java.util.Map">
	/*sample.service.impl.CodeMapper.selectCodeDtl*/
	SELECT CODE
	     , CODE_NM
	  FROM CMMN_CD_DTL
	 WHERE 1=1
	   <if test="SEARCH_WORD != null and SEARCH_WORD != ''">
		   <if test="SEARCH_TYPE == 'ALL'">
	   AND (CODE LIKE CONCAT('%',#{SEARCH_WORD},'%')
	        OR CODE_NM LIKE CONCAT('%',#{SEARCH_WORD},'%')
	       )
		   </if>
		   <if test="SEARCH_TYPE == 'CODE'">
	   AND CODE LIKE CONCAT('%',#{SEARCH_WORD},'%')
		   </if>
		   <if test="SEARCH_TYPE == 'CODE_NM'">
	   AND CODE_NM LIKE CONCAT('%',#{SEARCH_WORD},'%')
		   </if>
	   </if>
	   AND PT_CODE = #{PT_CODE}
	</select>
	
	<insert id="saveCodeDtl" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.saveCodeMst*/
	INSERT INTO CMMN_CD_DTL
	( CODE
	, CODE_NM
	, PT_CODE
	)
	VALUES 
	( #{CODE}
	, #{CODE_NM}
	, #{PT_CODE}
	)
	ON DUPLICATE KEY 
	UPDATE CODE_NM = #{CODE_NM}
	</insert>
	
	<delete id="deleteCodeDtl" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.deleteCodeMst*/
	DELETE FROM CMMN_CD_DTL
	 WHERE CODE = #{CODE}
	</delete>
	
	<select id="checkCodeDtl" parameterType="java.util.Map" resultType="Integer">
	/*sample.service.impl.CodeMapper.checkCodeDtl*/
	SELECT COUNT(1)
	  FROM CMMN_CD_DTL
	 WHERE CODE = #{CODE}
	   AND PT_CODE = #{PT_CODE}
	</select>
	
	<insert id="insertCodeDtl" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.insertCodeDtl*/
	INSERT INTO CMMN_CD_DTL
	( CODE
	, CODE_NM
	, PT_CODE
	)
	VALUES 
	( #{CODE}
	, #{CODE_NM}
	, #{PT_CODE}
	)
	</insert>
	
	<update id="updateCodeDtl" parameterType="java.util.Map">
	/*sample.service.impl.CodeMapper.updateCodeDtl*/
	UPDATE CMMN_CD_DTL
	   SET CODE_NM = #{CODE_NM}
	 WHERE CODE = #{CODE}
	   AND PT_CODE = #{PT_CODE}
	</update>
	
</mapper>